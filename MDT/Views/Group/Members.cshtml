@using MDT.Models.DTO
@using MDT.ViewModels
@model GroupVM
@{
    ViewBag.Title = "Group Members";
    UserDTO user = (UserDTO)Session["User"];
}

<div id="members" class="MemberPanel">
    @{
        Html.RenderPartial("GroupMembers", Model);
    }
</div>
<hr />

<div id="pending" class="MemberPanel">
    @{
        Html.RenderPartial("GroupPending", Model);
    }
</div>
<hr />
<div id="invites" class="MemberPanel">
    @{
        Html.RenderPartial("GroupInvites", Model);
    }
</div>

<script type="text/javascript">
    $(document).on('click', '.btnModal', function () {
        let action = $(this).attr('data-action');
        $('#modaldiv').empty();
        $('#modaldiv').append('<div class="spinnerdiv"><span class="text-primary fa fa-5x fa-spinner fa-spin center"></span></div>');
        $('#popup').modal("show");
        $('#modaldiv').load(action);
    });

    $(document).on('click', '.btnMember', function () {
        let div = $(this).closest('.MemberPanel');
        let action = $(this).attr('data-action');
        $(div).empty();
        $(div).append('<div class="spinnerdiv"><span class="text-primary fa fa-5x fa-spinner fa-spin center"></span></div>');
        $(div).load(action);
    });
</script>